<form th:action="@{/policy/ODRLCreator}" th:object="${odrlPolicy}" method="post">
  <input type="hidden" th:field="*{policyId}" />
  <input type="hidden" th:field="*{consumer.type}" />
  <input type="hidden" th:field="*{rules[0].type}" />
  <input type="hidden" th:field="*{rules[0].action.type}" />

  <div>
    <p>
    <h3><img src="../images/provide_access.png" style="height:60px;" />  <img src="../images/purpose.png" style="height:60px;" /><br/>
      This policy gives permission to a specified IDS data consumer to use your data.</h3>
    </p>
  </div>

  <p>Policy Type*:
    <select id="policyType" th:field="*{type}" onchange="typeOnChanges(this)" required="required">
      <option value="AGREEMENT">Agreement</option>
      <option value="OFFER">Offer</option>
      <option value="REQUEST">Request</option>
    </select>
  </p>
  <p>Data URI*: <input required="required" type="text" size="40" placeholder=" e.g. http://example.com/ids-data/production-plan" th:field="*{target}" /></p>
  <p id="provider" >Data Provider*: <input  id="providerInput" required="required" type="text" size="40" value="My party"></p>
  <p id="consumer" >Data Consumer*:
    <div id="consumerDiv" class="form-group blu-margin">
      <select id="consumerInput" class="form-control" th:field="*{consumer.uri}" required="required">
        <option value="http://example.com/party/consumer-party" selected>Consumer party</option>
      </select>
    </div>
  </p>

  <div th:if="${(odrlPolicy?.rules != null) and (odrlPolicy?.rules[0].constraints != null )}">
    <th:block th:each="condition, itemStat : ${odrlPolicy?.rules[0].constraints}">
      <hr>
      <input type="hidden" th:field="*{rules[0].constraints[__${itemStat.index}__].type}" />
      <input type="hidden" th:field="*{rules[0].constraints[__${itemStat.index}__].operator}" />
      <input type="hidden" th:field="*{rules[0].constraints[__${itemStat.index}__].leftOperand}" />
      <input type="hidden" th:field="*{rules[0].constraints[__${itemStat.index}__].rightOperand.type}" />
      <div th:if="${(condition?.leftOperand?.name() == 'PURPOSE')}">
        <input type="checkbox" id="purposeCheckbox" name="purposeCheckboxInput"> Restrict Purpose<br>
        <p id="purpose">Any certified application in the market place uses the data for a specified purpose. <br/>
          You can restrict the usage of your data to specific applications by choosing your intended purpose from the list below*:
        <div class="form-group blu-margin">
          <select id="purposeInput" class="form-control" th:field="*{rules[0].constraints[__${itemStat.index}__].rightOperand.value}" required="required" disabled="disabled">
            <option value="http://example.com/ids-purpose:Marketing" selected>Marketing</option>
            <option value="http://example.com/ids-purpose:Risk-Management">Risk Management</option>
          </select>
        </div>
        </p>
      </div>

      <div th:if="${(condition?.leftOperand?.name() == 'ABSOLUTESPATIALPOSITION')}">
        <input type="checkbox" id="locationCheckbox" name="locationCheckboxInput"> Restrict Location<br>
        <p id="location">Location*:  <br/><input id="locationInput" required="required" type="text" size="40" placeholder=" e.g. http://ontologi.es/place/DE" th:field="*{rules[0].constraints[__${itemStat.index}__].rightOperand.value}" disabled="disabled"/></p>
      </div>

      <div th:if="${(condition?.leftOperand?.name() == 'SYSTEM')}">
        <input type="checkbox" id="systemCheckbox" name="systemCheckboxInput"> Restrict System<br>
        <p id="system">System*: <input id="systemInput" required="required" type="text" size="40" placeholder=" e.g. http://example.com/ids-app:risk-management-system" th:field="*{rules[0].constraints[__${itemStat.index}__].rightOperand.value}" disabled="disabled"/></p>
      </div>

      <div th:if="${(condition?.leftOperand?.name() == 'EVENT')}">
        <input type="checkbox" id="eventCheckbox" name="eventCheckboxInput"> Restrict Event<br>
        <p id="event">Event*: <input id="eventInput" required="required" type="text" size="40" placeholder=" e.g. http://example.com/ids-event:exhibition" th:field="*{rules[0].constraints[__${itemStat.index}__].rightOperand.value}" disabled="disabled"/></p>
      </div>

      <div th:if="${(condition?.leftOperand?.name() == 'COUNT')}">
        <input type="checkbox" id="countCheckbox" name="countCheckboxInput"> Restrict Number of Usage <br>
        <p>Count*: <input id="countInput" required="required" type="text" size="40" placeholder=" e.g. 10" th:field="*{rules[0].constraints[__${itemStat.index}__].rightOperand.value}" disabled="disabled"/></p>
      </div>

      <div th:if="${(condition?.leftOperand?.name() == 'POLICY_EVALUATION_TIME')}">
        <input type="checkbox" id="timeIntervalCheckbox" name="timeIntervalCheckboxInput"> Restrict Time Interval<br>
        <div th:if="${(condition?.rightOperand?.entities != null )}">
          <th:block th:each="entity, iStat : ${condition?.rightOperand?.entities}">
            <div th:if="${(entity?.entityType?.name() == 'BEGIN')}">
              <input type="hidden" th:field="*{rules[0].constraints[__${itemStat.index}__].rightOperand.entities[__${iStat.index}__].entityType}" />
              <input type="hidden" th:field="*{rules[0].constraints[__${itemStat.index}__].rightOperand.entities[__${iStat.index}__].dataType}" />
              <p>Start Time*: <input id="startTimeInput" required="required" type="text" th:field="*{rules[0].constraints[__${itemStat.index}__].rightOperand.entities[__${iStat.index}__].value}" disabled="disabled"/></p>
            </div>
            <div th:if="${(entity?.entityType?.name() == 'END')}">
              <input type="hidden" th:field="*{rules[0].constraints[__${itemStat.index}__].rightOperand.entities[__${iStat.index}__].entityType}" />
              <input type="hidden" th:field="*{rules[0].constraints[__${itemStat.index}__].rightOperand.entities[__${iStat.index}__].dataType}" />
              <p>End Time*: <input id="endTimeInput" required="required" type="text" th:field="*{rules[0].constraints[__${itemStat.index}__].rightOperand.entities[__${iStat.index}__].value}" disabled="disabled"/></p>
            </div>
          </th:block>
        </div>
      </div>

      <div th:if="${(condition?.leftOperand?.name() == 'ELAPSED_TIME')}">
        <input type="checkbox" id="elapsedTimeCheckbox" name="elapsedTimeCheckboxInput" > Restrict Time Duration<br>
        <div th:if="${(condition?.rightOperand?.entities != null )}">
          <th:block th:each="entity, iStat : ${condition?.rightOperand?.entities}">
            <div th:if="${(entity?.entityType?.name() == 'BEGIN')}">
              <input type="checkbox" id="specifyBeginComplexCheckbox" name="specifyBeginComplexCheckboxInput" checked> Specify a begin time<br>
              <input type="hidden" th:field="*{rules[0].constraints[__${itemStat.index}__].rightOperand.entities[__${iStat.index}__].entityType}" />
              <input type="hidden" th:field="*{rules[0].constraints[__${itemStat.index}__].rightOperand.entities[__${iStat.index}__].dataType}" />
              <p><input id="beginTimeInput" required="required" type="text" th:field="*{rules[0].constraints[__${itemStat.index}__].rightOperand.entities[__${iStat.index}__].value}" disabled="disabled"/></p>
            </div>
            <div th:if="${(entity?.entityType?.name() == 'HASDURATION')}">
              <input type="hidden" th:field="*{rules[0].constraints[__${itemStat.index}__].rightOperand.entities[__${iStat.index}__].entityType}" />
              <input type="hidden" th:field="*{rules[0].constraints[__${itemStat.index}__].rightOperand.entities[__${iStat.index}__].dataType}" />
              <p>Duration value*:<input id="durationInput" type="text" required="required" size="5" th:field="*{rules[0].constraints[__${itemStat.index}__].rightOperand.entities[__${iStat.index}__].value}" disabled="disabled" />
                <select id="timeUnitInput" th:field="*{rules[0].constraints[__${itemStat.index}__].rightOperand.entities[__${iStat.index}__].timeUnit}" disabled="disabled">
                  <option
                          th:each="dropdownValue: ${T(de.fraunhofer.iese.ids.odrl.policy.library.model.enums.TimeUnit).values()}"
                          th:value="${dropdownValue}"
                          th:text="${dropdownValue}" ></option>
                </select>
              </p>                </div>
          </th:block>
        </div>

      </div>

      <div th:if="${(condition?.leftOperand?.name() == 'PAY_AMOUNT')}">
        <input type="checkbox" id="paymentCheckbox" name="paymentCheckboxInput"> After Payment<br>
        <input type="hidden" th:field="*{rules[0].constraints[__${itemStat.index}__].unit}" />
        <p id="payment" >Payment (Euro)*:<br/>
          <input id="paymentValueInput" type="text" placeholder=" e.g. 150" required="required" size="5" th:field="*{rules[0].constraints[__${itemStat.index}__].rightOperand.value}" disabled="disabled" />
          (for sale data or rent data)
        <div class="form-group blu-margin">
          <select id="paymentContractInput" class="form-control" th:field="*{rules[0].constraints[__${itemStat.index}__].contract}" required="required" disabled="disabled">
            <option value="http://dbpedia.org/page/Rent" selected>Rent</option>
            <option value="http://dbpedia.org/page/Sale">Sale</option>
          </select>
        </div>
        </p>
      </div>
    </th:block>
  </div>

  <button id="saveBtn" type="submit" class="btn btn-primary">Save</button>
</form>
